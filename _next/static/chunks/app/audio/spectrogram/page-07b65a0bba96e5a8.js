(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{179:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(5155),r=n(2115),c=n(3160),l=n(6369);function u(){let e=(0,r.useRef)(null),{analyser:t,ctx:n,play:u,pause:s,stop:i,isPlaying:o,setVolume:d}=(0,c.e)({fftSize:2048,smoothingTimeConstant:.6}),[m,f]=(0,r.useState)(0),[h,x]=(0,r.useState)(.7);return(0,r.useEffect)(()=>d(h),[h,d]),(0,r.useEffect)(()=>{if(!t||!n)return;let a=e.current,r=a.getContext("2d");if(!r)return;let c=a.width,l=a.height,u=t.frequencyBinCount,s=new Float32Array(u),i=()=>{if(!t||!n)return;let e=r.getImageData(1,0,c-1,l);r.putImageData(e,0,0),t.getFloatFrequencyData(s);for(let e=0;e<l;e++){let t=1-e/(l-1);r.fillStyle=function(e){let t=Math.max(0,Math.min(1,e)),n=Math.round(255*(34.61*t-59.75*t*t+32.27*t*t*t)),a=Math.round(255*(0+2.86*t+0*t*t)),r=Math.round(255*(13.36*t-13.36*t*t+0*t*t*t));return"rgb(".concat(Math.max(0,n),", ").concat(Math.max(0,Math.min(255,a)),", ").concat(Math.max(0,r),")")}((s[Math.min(u-1,Math.max(0,Math.round(20*Math.pow(n.sampleRate/2/20,t)/(n.sampleRate/2)*u)))]+100)/70),r.fillRect(c-1,e,1,1)}requestAnimationFrame(i)};requestAnimationFrame(i)},[t,n]),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-end gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Track"}),(0,a.jsx)("select",{className:"border rounded-md px-3 py-2 bg-background",value:m,onChange:e=>f(Number(e.target.value)),disabled:o,children:l.p.map((e,t)=>(0,a.jsx)("option",{value:t,children:e.label},e.file))})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"border rounded-md px-3 py-2 hover:bg-accent",onClick:()=>u(l.p[m].file),disabled:o,children:"Play"}),(0,a.jsx)("button",{className:"border rounded-md px-3 py-2 hover:bg-accent",onClick:s,disabled:!o,children:"Pause"}),(0,a.jsx)("button",{className:"border rounded-md px-3 py-2 hover:bg-accent",onClick:i,children:"Stop"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm text-muted-foreground",children:"Volume"}),(0,a.jsx)("input",{type:"range",min:0,max:1,step:.01,value:h,onChange:e=>x(Number(e.target.value)),className:"w-40"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground tabular-nums",children:[Math.round(100*h),"%"]})]})]}),(0,a.jsx)("div",{className:"border rounded-lg p-3 bg-muted/20",children:(0,a.jsx)("canvas",{ref:e,width:900,height:360,className:"w-full h-[360px]"})})]})}function s(){return(0,a.jsxs)("section",{className:"py-8 container max-w-5xl",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Spectrogram Waterfall"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Scrolling time–frequency heatmap using FFT magnitudes."}),(0,a.jsx)(u,{})]})}},861:(e,t,n)=>{"use strict";function a(e){let t="/visualizers";return!t||e.startsWith(t+"/")?e:e.startsWith("/")?"".concat(t).concat(e):"".concat(t,"/").concat(e)}n.d(t,{O:()=>a})},3160:(e,t,n)=>{"use strict";n.d(t,{e:()=>c});var a=n(2115),r=n(861);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{fftSize:t=2048,smoothingTimeConstant:n=.8}=e,c=(0,a.useRef)(null),l=(0,a.useRef)(null),u=(0,a.useRef)(null),s=(0,a.useRef)(null),i=(0,a.useRef)(null),[o,d]=(0,a.useState)(!1),[m,f]=(0,a.useState)(.7);(0,a.useEffect)(()=>{let e=new Audio;return e.crossOrigin="anonymous",c.current=e,()=>{e.pause(),e.src="",c.current=null}},[]);let h=(0,a.useCallback)(async()=>{let e=l.current;if(e||(l.current=e=new(window.AudioContext||window.webkitAudioContext)),u.current||(u.current=e.createMediaElementSource(c.current)),!s.current){let a=e.createAnalyser();a.fftSize=t,a.smoothingTimeConstant=n,s.current=a}if(!i.current){let t=e.createGain();t.gain.value=m,i.current=t}u.current.disconnect(),i.current.disconnect(),s.current.disconnect(),u.current.connect(i.current),i.current.connect(e.destination),u.current.connect(s.current)},[t,n,m]);(0,a.useEffect)(()=>{i.current&&(i.current.gain.value=m)},[m]);let x=(0,a.useCallback)(async e=>{await h();let t=c.current;t.src=(0,r.O)(e),await t.play(),d(!0)},[h]),g=(0,a.useCallback)(()=>{var e;null==(e=c.current)||e.pause(),d(!1)},[]),p=(0,a.useCallback)(()=>{c.current&&(c.current.pause(),c.current.currentTime=0),d(!1)},[]);return(0,a.useEffect)(()=>()=>{try{var e,t,n,a;null==(e=s.current)||e.disconnect(),null==(t=i.current)||t.disconnect(),null==(n=u.current)||n.disconnect(),null==(a=l.current)||a.close()}catch(e){}},[]),{audio:c.current,ctx:l.current,analyser:s.current,isPlaying:o,volume:m,setVolume:f,play:x,pause:g,stop:p}}},6369:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});let a=[{label:"Rock – Take the Lead (Kevin MacLeod)",file:"/audio/kevin-macleod_take-the-lead.mp3",genre:"Rock"},{label:"Jazz – George Street Shuffle (Kevin MacLeod)",file:"/audio/kevin-macleod_george-street-shuffle.mp3",genre:"Jazz"},{label:"Metal – Metalmania (Kevin MacLeod)",file:"/audio/kevin-macleod_metalmania.mp3",genre:"Metal"},{label:"Industrial – Industrial Music Box (Kevin MacLeod)",file:"/audio/kevin-macleod_industrial-music-box.mp3",genre:"Industrial"}]},8850:(e,t,n)=>{Promise.resolve().then(n.bind(n,179))}},e=>{e.O(0,[441,964,358],()=>e(e.s=8850)),_N_E=e.O()}]);